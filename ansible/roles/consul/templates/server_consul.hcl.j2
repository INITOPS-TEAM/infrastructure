node_name  = "consul-server"
server     = true
bootstrap_expect = 1
datacenter = "{{ consul_datacenter }}"
data_dir   = "{{ consul_data_dir }}"
bind_addr   = "{{ ansible_facts['eth1']['ipv4']['address'] }}"
client_addr = "0.0.0.0"

encrypt = "{{ consul_gossip_key }}"

ui_config {
  enabled = true
}
tls {
  defaults {
    ca_file   = "{{ consul_config_dir }}/certs/consul-agent-ca.pem"
    cert_file = "{{ consul_config_dir }}/certs/server.pem"
    key_file  = "{{ consul_config_dir }}/certs/server-key.pem"

    verify_incoming = true
    verify_outgoing = true
  }
}

ports {
  http  = -1
  https = 8501
  dns   = 8600
}

log_level = "INFO"